<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Unnecessarily Difficult Phone Input</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #f5f7ff, #dcdde8);
      color: #111827;
    }

    .app {
      background: #ffffff;
      border-radius: 18px;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.15);
      padding: 24px 24px 28px;
      max-width: 720px;
      width: 100%;
    }

    .app-header {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: flex-start;
      margin-bottom: 20px;
    }

    .title {
      font-size: 1.3rem;
      font-weight: 700;
      line-height: 1.2;
    }

    .subtitle {
      font-size: 0.9rem;
      color: #6b7280;
      margin-top: 4px;
    }

    .tag {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      color: #6b7280;
      background: #f9fafb;
      white-space: nowrap;
    }

    /* Interaction area + fade */
    #interactionArea {
      transition: opacity 0.3s ease;
    }

    #interactionArea.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    .preview {
      margin-bottom: 18px;
      padding: 12px 14px;
      border-radius: 12px;
      background: #f9fafb;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .preview-label {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #9ca3af;
    }

    .preview-number {
      font-family: "SF Mono", ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 1.2rem;
      font-weight: 600;
      letter-spacing: 0.18em;
    }

    .reset-button {
      font-size: 0.8rem;
      border-radius: 999px;
      border: none;
      padding: 6px 12px;
      background: #e5e7eb;
      cursor: pointer;
      transition: background 0.15s, transform 0.05s;
    }

    .reset-button:hover {
      background: #d1d5db;
    }
    .reset-button:active {
      transform: translateY(1px);
    }

    .digits-grid {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 10px;
      margin-bottom: 20px;
    }

    .digit-card {
      background: #f3f4f6;
      border-radius: 12px;
      padding: 8px 10px 10px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      position: relative;
      overflow: hidden;
      transition: box-shadow 0.15s, transform 0.1s, background 0.15s;
    }

    .digit-card::before {
      content: attr(data-index-label);
      position: absolute;
      top: 6px;
      right: 8px;
      font-size: 0.65rem;
      color: #9ca3af;
    }

    .digit-current {
      font-family: "SF Mono", ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 1.4rem;
      font-weight: 700;
      text-align: center;
    }

    .digit-ops {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 4px;
      margin-top: 2px;
    }

    .op-btn {
      border: none;
      border-radius: 999px;
      padding: 4px 0;
      font-size: 0.8rem;
      cursor: pointer;
      background: #e5e7eb;
      color: #111827;
      transition: background 0.1s, transform 0.05s, box-shadow 0.1s, filter 0.1s;
      box-shadow: 0 1px 0 rgba(15, 23, 42, 0.12);
    }

    .op-btn:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
    }

    .op-btn:active {
      transform: translateY(1px);
      box-shadow: none;
    }

    /* Neon operator variants */
    .op-btn.add {
      background: #22c55e;
      color: #052e16;
      box-shadow: 0 0 8px rgba(34, 197, 94, 0.7);
    }

    .op-btn.sub {
      background: #f97373;
      color: #450a0a;
      box-shadow: 0 0 8px rgba(248, 113, 113, 0.7);
    }

    .op-btn.mul {
      background: #c4b5fd;
      color: #312e81;
      box-shadow: 0 0 8px rgba(129, 140, 248, 0.7);
    }

    .op-btn.div {
      background: #67e8f9;
      color: #083344;
      box-shadow: 0 0 8px rgba(45, 212, 191, 0.7);
    }

    .digit-hint {
      font-size: 0.7rem;
      color: #6b7280;
      text-align: center;
      margin-top: 2px;
    }

    .digit-lock-status {
      font-size: 0.7rem;
      text-align: center;
      color: #f97316;
    }

    .digit-card.locked {
      background: #ecfdf5;
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.4) inset;
      transform: translateY(-1px);
    }

    .digit-card.locked .digit-current {
      color: #16a34a;
    }

    .digit-card.locked .digit-lock-status {
      color: #16a34a;
      font-weight: 600;
    }

    .digit-card.locked .op-btn {
      opacity: 0.4;
      pointer-events: none;
      box-shadow: none;
    }

    .digit-card.locked .lock-button,
    .digit-card.locked .video-lock-link {
      opacity: 0.6;
      pointer-events: none;
    }

    .lock-button {
      margin-top: 4px;
      border-radius: 999px;
      border: none;
      padding: 4px 0;
      font-size: 0.75rem;
      cursor: pointer;
      background: #fbbf24;
      color: #451a03;
      box-shadow: 0 0 6px rgba(251, 191, 36, 0.7);
      transition: transform 0.05s, box-shadow 0.1s, filter 0.1s;
    }

    .lock-button:hover {
      filter: brightness(1.05);
    }
    .lock-button:active {
      transform: translateY(1px);
      box-shadow: none;
    }

    .video-lock-link {
      margin-top: 4px;
      font-size: 0.75rem;
      text-align: center;
      display: inline-block;
      text-decoration: underline;
      color: #2563eb;
      cursor: pointer;
    }

    .form-row {
      margin-bottom: 12px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    label {
      font-size: 0.85rem;
      color: #4b5563;
      font-weight: 500;
    }

    input[type="tel"] {
      border-radius: 10px;
      border: 1px solid #d1d5db;
      padding: 8px 10px;
      font-size: 0.95rem;
      outline: none;
      transition: border-color 0.15s, box-shadow 0.15s, background 0.15s;
      background: #f9fafb;
    }

    input[type="tel"]:focus {
      border-color: #6366f1;
      box-shadow: 0 0 0 1px rgba(79, 70, 229, 0.35);
      background: #ffffff;
    }

    .helper {
      font-size: 0.8rem;
      color: #9ca3af;
    }

    .submit-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-top: 6px;
    }

    .submit-btn {
      border: none;
      border-radius: 999px;
      padding: 8px 16px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      background: #4f46e5;
      color: white;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 8px 18px rgba(79, 70, 229, 0.45);
      transition: background 0.15s, transform 0.05s, box-shadow 0.15s;
      white-space: nowrap;
    }

    .submit-btn:hover {
      background: #4338ca;
    }

    .submit-btn:active {
      transform: translateY(1px);
      box-shadow: 0 3px 10px rgba(79, 70, 229, 0.4);
    }

    .status {
      font-size: 0.85rem;
    }

    .status-ok {
      color: #16a34a;
    }

    .status-error {
      color: #dc2626;
    }

    .shake {
      animation: shake 0.3s;
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-6px); }
      50% { transform: translateX(6px); }
      75% { transform: translateX(-6px); }
      100% { transform: translateX(0); }
    }

    /* Result screen (official error) */
    .result-screen {
      display: none;
      margin-top: 8px;
      padding: 18px 16px 20px;
      border-radius: 14px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
    }

    .result-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .result-icon {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #fee2e2;
      color: #b91c1c;
      font-size: 1.2rem;
    }

    .result-title {
      font-size: 0.95rem;
      font-weight: 600;
      color: #111827;
    }

    .result-text {
      font-size: 0.85rem;
      color: #4b5563;
      margin: 4px 0 10px;
    }

    .result-number-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
    }

    .result-number {
      font-family: "SF Mono", ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 1.05rem;
      font-weight: 600;
      margin-top: 2px;
      margin-bottom: 10px;
    }

    .try-again-btn {
      border-radius: 999px;
      border: 1px solid #d1d5db;
      padding: 6px 14px;
      font-size: 0.85rem;
      cursor: pointer;
      background: #ffffff;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: background 0.15s, transform 0.05s, box-shadow 0.15s;
    }

    .try-again-btn:hover {
      background: #f3f4f6;
      box-shadow: 0 2px 5px rgba(15, 23, 42, 0.08);
    }

    .try-again-btn:active {
      transform: translateY(1px);
      box-shadow: none;
    }

    @media (max-width: 640px) {
      .app {
        border-radius: 0;
        height: 100vh;
        max-width: 100%;
      }
      .digits-grid {
        grid-template-columns: repeat(5, minmax(0, 1fr));
      }
      .preview-number {
        font-size: 1rem;
        letter-spacing: 0.12em;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="app-header">
      <div>
        <div class="title">‚ÄúFun‚Äù Phone Number Input</div>
        <p class="subtitle">
          Step 1: Use neon math abilities on each digit.<br>
          Step 2: Lock each digit with its own weird ritual (buttons, videos, double-clicks, long-presses).<br>
          Step 3: Type your real number below. The network will handle it from there. Probably.
        </p>
      </div>
      <div class="tag">Unnecessarily Difficult</div>
    </div>

    <!-- Main interaction area that will fade out -->
    <div id="interactionArea">
      <div class="preview">
        <div>
          <div class="preview-label">Constructed phone number</div>
          <div id="previewNumber" class="preview-number">(???)-???-????</div>
        </div>
        <button type="button" class="reset-button" id="resetDigitsBtn">Chaos again</button>
      </div>

      <div class="digits-grid" id="digitsGrid">
        <!-- Digit cards inserted via JS -->
      </div>

      <form id="phoneForm" novalidate>
        <div class="form-row">
          <label for="realPhone">Confirm your phone number (normal input)</label>
          <input
            id="realPhone"
            type="tel"
            inputmode="numeric"
            autocomplete="tel"
            placeholder="(555) 123-4567"
          />
          <div class="helper">
            We‚Äôll only accept it if your math-transformed digits match this exactly.<br>
            Also, every digit must be locked using its own bizarre mechanism first.
          </div>
        </div>

        <div class="submit-row">
          <button type="submit" class="submit-btn">
            Submit the Hard Way
            <span>üì±‚ûï‚ûñ‚úñÔ∏è‚ûó</span>
          </button>
          <div id="statusMessage" class="status"></div>
        </div>
      </form>
    </div>

    <!-- Official-looking error screen -->
    <div id="resultScreen" class="result-screen">
      <div class="result-header">
        <div class="result-icon">üö´</div>
        <div class="result-title">Call Cannot Be Completed as Dialed</div>
      </div>
      <p class="result-text">
        The number you entered cannot be dialed as entered. Please verify the number and try again.
        If you believe you have reached this message in error, you are probably using this form correctly.
      </p>
      <div class="result-number-label">Entered number</div>
      <div id="resultNumber" class="result-number"></div>
      <button type="button" id="tryAgainBtn" class="try-again-btn">
        Try Again
        <span>‚Üª</span>
      </button>
    </div>
  </div>

  <script>
    (function() {
      const DIGIT_COUNT = 10;
      let digits = [];
      let locked = [];

      const digitsGrid = document.getElementById('digitsGrid');
      const previewNumberEl = document.getElementById('previewNumber');
      const resetDigitsBtn = document.getElementById('resetDigitsBtn');
      const phoneForm = document.getElementById('phoneForm');
      const realPhoneInput = document.getElementById('realPhone');
      const statusMessage = document.getElementById('statusMessage');
      const appEl = document.querySelector('.app');

      const interactionArea = document.getElementById('interactionArea');
      const resultScreen = document.getElementById('resultScreen');
      const resultNumberEl = document.getElementById('resultNumber');
      const tryAgainBtn = document.getElementById('tryAgainBtn');

      // Edit these to change what videos you troll people with
      const videoLinks = [
        {
          label: 'Watch this extremely important security training',
          url: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ'
        },
        {
          label: 'Watch a classic phone commercial',
          url: 'https://youtu.be/694TX2lQ7Uo'
        },
        {
          label: 'Learn about responsible phone number usage',
          url: 'https://youtu.be/V04bh-G4-qU'
        }
      ];

      function randomDigit() {
        return Math.floor(Math.random() * 10);
      }

      function initDigits() {
        digits = Array.from({ length: DIGIT_COUNT }, () => randomDigit());
        locked = Array.from({ length: DIGIT_COUNT }, () => false);
      }

      function formatPhoneNumberFromArray(d) {
        if (d.length !== DIGIT_COUNT) return '(???)-???-????';
        const part1 = `${d[0]}${d[1]}${d[2]}`;
        const part2 = `${d[3]}${d[4]}${d[5]}`;
        const part3 = `${d[6]}${d[7]}${d[8]}${d[9]}`;
        return `(${part1}) ${part2}-${part3}`;
      }

      function updatePreview() {
        previewNumberEl.textContent = formatPhoneNumberFromArray(digits);
      }

      function stripNonDigits(str) {
        return (str || '').replace(/\D/g, '');
      }

      function createDigitCard(index) {
        const card = document.createElement('div');
        card.className = 'digit-card';
        card.dataset.indexLabel = `pos ${index + 1}`;

        const current = document.createElement('div');
        current.className = 'digit-current';
        current.textContent = digits[index];

        const ops = document.createElement('div');
        ops.className = 'digit-ops';

        const operations = [
          { symbol: '+1', fn: (v) => (v + 1) % 10 },
          { symbol: '‚àí1', fn: (v) => (v + 9) % 10 }, // mod 10
          { symbol: '√ó2', fn: (v) => (v * 2) % 10 },
          { symbol: '√∑2', fn: (v) => Math.floor(v / 2) }
        ];

        operations.forEach((op) => {
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.className = 'op-btn';
          btn.textContent = op.symbol;

          // Neon classes per operator
          if (op.symbol.startsWith('+')) {
            btn.classList.add('add');
          } else if (op.symbol.startsWith('‚àí')) {
            btn.classList.add('sub');
          } else if (op.symbol.startsWith('√ó')) {
            btn.classList.add('mul');
          } else {
            btn.classList.add('div');
          }

          btn.addEventListener('click', () => {
            if (locked[index]) return;
            digits[index] = op.fn(digits[index]);
            current.textContent = digits[index];
            updatePreview();
          });
          ops.appendChild(btn);
        });

        const hint = document.createElement('div');
        hint.className = 'digit-hint';

        const lockStatus = document.createElement('div');
        lockStatus.className = 'digit-lock-status';
        lockStatus.textContent = 'Not locked';

        function lockThisDigit() {
          if (locked[index]) return;
          locked[index] = true;
          card.classList.add('locked');
          lockStatus.textContent = 'Locked ‚úì';
        }

        // Different lock mechanics per digit
        const mode = index % 4; // 0,1,2,3 cycling

        if (mode === 0) {
          // Mode 0: Lock button
          hint.textContent = 'Lock this digit with the glowing button.';
          const lockBtn = document.createElement('button');
          lockBtn.type = 'button';
          lockBtn.className = 'lock-button';
          lockBtn.textContent = 'Lock this digit';
          lockBtn.addEventListener('click', () => {
            lockThisDigit();
          });
          card.appendChild(current);
          card.appendChild(ops);
          card.appendChild(lockBtn);
        } else if (mode === 1) {
          // Mode 1: Click a video link to lock
          const videoConfig = videoLinks[index % videoLinks.length];
          hint.textContent = 'Click the very important video link below to lock this digit.';
          const videoLinkEl = document.createElement('a');
          videoLinkEl.href = videoConfig.url;
          videoLinkEl.target = '_blank';
          videoLinkEl.rel = 'noopener noreferrer';
          videoLinkEl.textContent = videoConfig.label;
          videoLinkEl.className = 'video-lock-link';

          videoLinkEl.addEventListener('click', () => {
            // Give them a tiny moment to realize what happened
            setTimeout(() => {
              lockThisDigit();
            }, 500);
          });

          card.appendChild(current);
          card.appendChild(ops);
          card.appendChild(videoLinkEl);
        } else if (mode === 2) {
          // Mode 2: Double-click / double-tap on card
          hint.textContent = 'Double-click / double-tap this card to lock.';
          card.addEventListener('dblclick', (e) => {
            if (locked[index]) return;
            if (e.target.closest('.op-btn')) return;
            lockThisDigit();
          });

          card.appendChild(current);
          card.appendChild(ops);
        } else {
          // Mode 3: Long press on card
          hint.textContent = 'Long-press this card to lock.';
          let pressTimer = null;

          function startPress(e) {
            if (locked[index]) return;
            if (e.target.closest('.op-btn')) return;
            pressTimer = setTimeout(() => {
              lockThisDigit();
            }, 600);
          }

          function cancelPress() {
            if (pressTimer) {
              clearTimeout(pressTimer);
              pressTimer = null;
            }
          }

          card.addEventListener('pointerdown', startPress);
          card.addEventListener('pointerup', cancelPress);
          card.addEventListener('pointerleave', cancelPress);
          card.addEventListener('pointercancel', cancelPress);

          card.appendChild(current);
          card.appendChild(ops);
        }

        card.appendChild(hint);
        card.appendChild(lockStatus);

        return card;
      }

      function renderDigits() {
        digitsGrid.innerHTML = '';
        for (let i = 0; i < DIGIT_COUNT; i++) {
          digitsGrid.appendChild(createDigitCard(i));
        }
      }

      function handleSubmit(event) {
        event.preventDefault();
        statusMessage.textContent = '';
        statusMessage.className = 'status';

        // Require all digits to be locked
        if (locked.some(v => !v)) {
          statusMessage.textContent = 'Every digit must be locked using its bizarre mechanism first.';
          statusMessage.classList.add('status-error');
          appEl.classList.add('shake');
          setTimeout(() => appEl.classList.remove('shake'), 300);
          return;
        }

        const userDigits = stripNonDigits(realPhoneInput.value);
        if (userDigits.length !== DIGIT_COUNT) {
          statusMessage.textContent = 'Please enter a 10-digit phone number in the confirmation field.';
          statusMessage.classList.add('status-error');
          appEl.classList.add('shake');
          setTimeout(() => appEl.classList.remove('shake'), 300);
          return;
        }

        // At this point: all digits locked + 10-digit number entered.
        // Fade away interaction area and show the "cannot be completed" screen.
        const digitsArr = userDigits.split('').map(d => parseInt(d, 10));
        resultNumberEl.textContent = formatPhoneNumberFromArray(digitsArr);

        statusMessage.textContent = '';
        statusMessage.className = 'status';

        interactionArea.classList.add('fade-out');
        setTimeout(() => {
          interactionArea.style.display = 'none';
          resultScreen.style.display = 'block';
        }, 300);
      }

      function resetDigits() {
        initDigits();
        renderDigits();
        updatePreview();
        statusMessage.textContent = '';
        statusMessage.className = 'status';
      }

      function handleTryAgain() {
        // Restore interaction area
        resultScreen.style.display = 'none';
        interactionArea.style.display = 'block';
        interactionArea.classList.remove('fade-out');
        realPhoneInput.value = '';
        resetDigits();
      }

      // Init
      initDigits();
      renderDigits();
      updatePreview();

      // Events
      phoneForm.addEventListener('submit', handleSubmit);
      resetDigitsBtn.addEventListener('click', resetDigits);
      tryAgainBtn.addEventListener('click', handleTryAgain);
    })();
  </script>
</body>
</html>
